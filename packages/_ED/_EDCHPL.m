;!----------------------------------------------------------------------------!
;!                                                                            !
;! Licence et conditions d'utilisation                                        !
;! Yexpert : (your) Systeme Expert sous Mumps GT.M et GNU/Linux               !
;! Copyright (C) 2001-2015 by Hamid LOUAKED (HL).                             !
;!                                                                            !
;! Hamid LOUAKED                                                              !
;! 10, impasse Faraday                                                        !
;! 78520 LIMAY                                                                !
;! France                                                                     !
;!                                                                            !
;! yexpert@yrelay.fr                                                          !
;! http://www.yrelay.fr/                                                      !
;!                                                                            !
;! Ce programme est un logiciel libre ; vous pouvez le redistribuer           !
;! et/ou le modifier conformement aux dispositions de la Licence Publique     !
;! Generale GNU, telle que publiee par la Free Software Foundation ;          !
;! version 3 de la licence, ou encore (a votre choix) toute version ulterieure.
;!                                                                            !
;! Ce programme est distribue dans l'espoir qu'il sera utile,                 !
;! mais SANS AUCUNE GARANTIE ; sans meme la garantie implicite de             !
;! COMMERCIALISATION ou D'ADAPTATION A UN OBJET PARTICULIER.                  !
;! Pour plus de details, voir la Licence Publique Generale GNU.               !
;!                                                                            !
;! Un exemplaire de la Licence Publique Generale GNU doit etre fourni avec    !
;! ce programme ; si ce n'est pas le cas,                                     !
;! ecrivez a la Free Software Foundation Inc.,                                !
;! 675 Mass Ave, Cambridge, MA 02139, Etats-Unis.                             !
;!                                                                            !
;! Ce logiciel est telechargeable a l'adresse http://www.yrelay.fr/ ;         !
;! vous trouverez egalement, sur ce site, un mode d'emploi complet            !
;! et des informations supplementaires.                                       !
;!                                                                            !
;!----------------------------------------------------------------------------!
;!                                                                            !
;! GNU General Public License : http://www.gnu.org/copyleft/gpl.html          !
;!                                                                            !
;! Traduction francaise : http://dachary.org/loic/gpl-french.pdf              !
;!                                                                            !
;!----------------------------------------------------------------------------!

;!============================================================================!
;! Nomprog     :                                                              !
;! Module      :                                                              !
;! But         :                                                              !
;!                                                                            !
;! Description :                                                              !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!----------------------------------------------------------------------------!
;! Modif ! Auteur ! Date     ! Commentaires                                   !
;!-------!--------!----------!------------------------------------------------!
;!       ! HL     ! 22/03/01 ! Creation                                       !
;! HL001 ! HL     ! 00/00/00 ! Description succincte de la modification.      !
;! HL002 ! HL     ! 00/00/00 !                                                !
;!-------!--------!----------!------------------------------------------------!
;!============================================================================!

;%EDCHPL^INT^1^59547,73868^0
%EDCHPL ;;06:01 PM  13 Sep 1993; ; 14 Sep 93  5:00 PM
 
 
 
DEB 
 N HT
 I %9T<34 D @%9T
 Q
 
1 D LETTRE,ITALIC2,BOLD2,PROP2 S HT=12 D HAUT
 U %PORT W *27,*40,*115,12,*72
 Q
2 D LETTRE2,ITALIC2,BOLD2,PROP S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
3 D LETTRE2,ITALIC,BOLD2,PROP S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
4 D LETTRE2,ITALIC2,BOLD3,PROP S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
5 D LETTRE2,ITALIC2,BOLD2,PROP S HT=8 D HAUT
 U %PORT W *27,*40,*115,8,*72
 Q
6 D LETTRE2,ITALIC2,PROP2,BOLD2 S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
7 D LETTRE2,ITALIC2,PROP2,BOLD S HT=7 D HAUT
 U %PORT W *27,*40,*115,7,*72
 Q
8 D LETTRE2,ITALIC2,BOLD2,PROP2 S HT=11 D HAUT
 U %PORT W *27,*40,*115,11,*72
 Q
9 D LETTRE2,ITALIC2,BOLD2,PROP2 S HT=12 D HAUT
 U %PORT W *27,*40,*115,12,*72
 Q
10 D LETTRE2,ITALIC2,BOLD,PROP S HT=144E-1 D HAUT
 U %PORT W *27,*40,*115,144E-1,*72
 Q
11 D LETTRE2,ITALIC2,BOLD,PROP S HT=12 D HAUT
 U %PORT W *27,*40,*115,12,*72
 Q
12 D LETTRE2,ITALIC2,BOLD,PROP S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
13 D LETTRE2,ITALIC2,BOLD2,PROP S HT=8 D HAUT
 U %PORT W *27,*40,*115,8,*72
 Q
14 D LETTRE2,ITALIC2,BOLD2,PROP S HT=6 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
15 D LETTRE2,ITALIC,BOLD,PROP2 S HT=9 D HAUT
 U %PORT W *27,*40,*115,166E-1,*72
 Q
16 D LETTRE2,ITALIC2,BOLD,PROP2 S HT=7 D HAUT
 U %PORT W *27,*40,*115,214E-1,*72
 Q
17 D LETTRE2,ITALIC2,BOLD2,PROP S HT=12 D HAUT
 U %PORT W *27,*40,*115,8,*72
 Q
18 D LETTRE,ITALIC,BOLD2,PROP2 S HT=12 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
19 D LETTRE,ITALIC,BOLD2,PROP2 S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
20 D LETTRE,ITALIC,BOLD,PROP2 S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
21 D LETTRE2,ITALIC,BOLD,PROP S HT=8 D HAUT
 U %PORT W *27,*40,*115,8,*72
 Q
22 D LETTRE2,ITALIC,BOLD,PROP S HT=6 D HAUT
 U %PORT W *27,*40,*115,8,*72
 Q
23 D LETTRE2,ITALIC,BOLD,PROP S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
24 D LETTRE,ITALIC,PROP2,BOLD2 S HT=10 D HAUT
 U %PORT W *27,*40,*115,10,*72
 Q
25 D LETTRE,ITALIC,PROP2,BOLD2 S HT=8 D HAUT
 U %PORT W *27,*40,*115,8,*72
 Q
26 D LETTRE,ITALIC,PROP2,BOLD S HT=8 D HAUT
 U %PORT W *27,*40,*115,8,*72
 Q
27 D LETTRE2,ITALIC,BOLD,PROP2 S HT=12 D HAUT
 U %PORT W *27,*40,*115,12,*72
 Q
28 D LETTRE2,ITALIC,BOLD2,PROP2 S HT=12 D HAUT
 U %PORT W *27,*40,*115,12,*72
 Q
29 D LETTRE,ITALIC2,BOLD,PROP2 S HT=16 D HAUT
 U %PORT W *27,*40,*115,16,*72
 Q
30 D LETTRE,ITALIC2,BOLD,PROP2 S HT=12 D HAUT
 U %PORT W *27,*40,*115,12,*72
 Q
31 D LETTRE,ITALIC2,BOLD,PROP S HT=6 D HAUT
 U %PORT W *27,*40,*115,6,*72
 Q
32 D LETTRE2,ITALIC,BOLD,PROP S HT=12 D HAUT
 U %PORT W *27,*40,*115,12,*72
 Q
33 D LETTRE2,ITALIC2,BOLD2,PROP S HT=6 D HAUT
 U %PORT W *27,*40,*115,6,*72
 Q
 
ITALIC 
 U %PORT W *27,*40,*115,*49,*83
 Q
ITALIC2 
 U %PORT W *27,*40,*115,*48,*83
 Q
BOLD 
 U %PORT W *27,*40,*115,1,*66
 Q
BOLD2 
 U %PORT W *27,*40,*115,-1,*66
 Q
BOLD3 
 U %PORT W *27,*40,*115,3,*66
 Q
LETTRE 
 Q
LETTRE2 
 Q
PROP 
 U %PORT W *27,*40,*115,1,*80
 Q
PROP2 
 U %PORT W *27,*40,*115,0,*80
 Q
HAUT 
 U %PORT W *27,*40,*115,HT,*86
 Q
CLEAR 
 U %PORT D LETTRE2,ITALIC2,BOLD2,PROP2
 U %PORT W *27,*40,*115,10,*72
 
 Q
 
 
 
GRAPH 
 I '($D(^V($J,"%"))) D INIT^%EDCENVL
 D COOR^%EDCENVL
 I %9X1=%9X2 D VERT(%9X1,%9Y1,%9X2,%9Y2,%9EPA) Q
 I %9Y1=%9Y2 D HORI(%9X1,%9Y1,%9X2,%9Y2,%9EPA) Q
 D ^%EDCHP2
 
 Q
VERT(%9X1,%9Y1,%9X2,%9Y2,%9EP) 
 N %9T S:(%9EP+0)=1E-3 %9EP=1E-2
 I %9Y1<%9Y2 S %9Y2=$$Y(%9Y2),%9Y2=%9Y2-%9Y1 G VERT1
 I %9Y1'<%9Y2 S X=%9X1,Y=%9Y1,%9X1=%9X2,%9Y1=%9Y2,%9Y1=$$Y(%9Y1),%9X2=X,%9Y2=Y,%9Y2=%9Y2-%9Y1
VERT1 I %9X1<%9X2 S %9X2=%9EP G VERT2
 S:%9X1'<%9X2 %9X1=%9X2,%9X2=%9EP
VERT2 
 
 N %FONC,%9X,%9Y S %9X=%9X1,%9Y=%9Y1
 S %FONC="MOUV" D ^%PBPZ
 S %FONC="TRAIT.VERTICAL" D ^%PBPZ Q
HORI(%9X1,%9Y1,%9X2,%9Y2,%9EP) 
 Q:$$OUT
 N %9T S:(%9EP+0)=1E-3 %9EP=1E-2
 I %9X1<%9X2 S %9X2=%9X2-%9X1 G HORI1
 I %9X1'<%9X2 S X=%9X1,Y=%9Y1,%9X1=%9X2,%9Y1=%9Y2,%9X2=X,%9Y2=Y,%9X2=%9X2-%9X1
HORI1 I %9Y1<%9Y2 S %9Y2=%9EP G HORI2
 S:%9Y1'<%9Y2 %9Y1=%9Y2,%9Y2=%9EP
HORI2 N %FONC,%9X,%9Y S %9X=%9X1,%9Y=%9Y1
 S %FONC="MOUV" D ^%PBPZ
 S %FONC="TRAIT.HORIZONTAL" D ^%PBPZ Q
CADRE 
 S:'($D(%9EPA)) %9EPA=1E-2
 
 S %9EPA=$J(%9EPA,1,3)
 I %9Y1>%9Y2 S %9Y1=$$Y(%9Y1) G CADR0
 I %9Y2>%9Y1 S %9Y2=$$Y(%9Y2) G CADR0
 S (%9Y1,%9Y2)=$$Y(%9Y1)
CADR0 D HORI(%9X1,%9Y1,%9X1+%9X2,%9Y1,%9EPA)
 
 D VERT(%9X1,%9Y1,%9X1,%9Y1+%9Y2,%9EPA)
 
 D VERT($$X(%9X1+%9X2),%9Y1,$$X(%9X1+%9X2),%9Y1+%9Y2,%9EPA)
 
 D HORI(%9X1,%9Y1+%9Y2,(%9X1+%9X2)+%9EPA,%9Y1+%9Y2,%9EPA)
 Q
JUST(Z) 
 Q $J(Z,1,2)
 
OUT() 
 
 
 Q 0
JUMP(Y) 
 
 
 Q
 
Y(Y) 
 
 Q Y
X(X) 
 
 Q X

