;!----------------------------------------------------------------------------!
;!                                                                            !
;! Licence et conditions d'utilisation                                        !
;! Yexpert : (your) Systeme Expert sous Mumps GT.M et GNU/Linux               !
;! Copyright (C) 2001-2015 by Hamid LOUAKED (HL).                             !
;!                                                                            !
;! Hamid LOUAKED                                                              !
;! 10, impasse Faraday                                                        !
;! 78520 LIMAY                                                                !
;! France                                                                     !
;!                                                                            !
;! yexpert@yrelay.fr                                                          !
;! http://www.yrelay.fr/                                                      !
;!                                                                            !
;! Ce programme est un logiciel libre ; vous pouvez le redistribuer           !
;! et/ou le modifier conformement aux dispositions de la Licence Publique     !
;! Generale GNU, telle que publiee par la Free Software Foundation ;          !
;! version 3 de la licence, ou encore (a votre choix) toute version ulterieure.
;!                                                                            !
;! Ce programme est distribue dans l'espoir qu'il sera utile,                 !
;! mais SANS AUCUNE GARANTIE ; sans meme la garantie implicite de             !
;! COMMERCIALISATION ou D'ADAPTATION A UN OBJET PARTICULIER.                  !
;! Pour plus de details, voir la Licence Publique Generale GNU.               !
;!                                                                            !
;! Un exemplaire de la Licence Publique Generale GNU doit etre fourni avec    !
;! ce programme ; si ce n'est pas le cas,                                     !
;! ecrivez a la Free Software Foundation Inc.,                                !
;! 675 Mass Ave, Cambridge, MA 02139, Etats-Unis.                             !
;!                                                                            !
;! Ce logiciel est telechargeable a l'adresse http://www.yrelay.fr/ ;         !
;! vous trouverez egalement, sur ce site, un mode d'emploi complet            !
;! et des informations supplementaires.                                       !
;!                                                                            !
;!----------------------------------------------------------------------------!
;!                                                                            !
;! GNU General Public License : http://www.gnu.org/copyleft/gpl.html          !
;!                                                                            !
;! Traduction francaise : http://dachary.org/loic/gpl-french.pdf              !
;!                                                                            !
;!----------------------------------------------------------------------------!

;!============================================================================!
;! Nomprog     :                                                              !
;! Module      :                                                              !
;! But         :                                                              !
;!                                                                            !
;! Description :                                                              !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!----------------------------------------------------------------------------!
;! Modif ! Auteur ! Date     ! Commentaires                                   !
;!-------!--------!----------!------------------------------------------------!
;!       ! HL     ! 22/03/01 ! Creation                                       !
;! HL001 ! HL     ! 00/00/00 ! Description succincte de la modification.      !
;! HL002 ! HL     ! 00/00/00 !                                                !
;!-------!--------!----------!------------------------------------------------!
;!============================================================================!

;%EDCPOST^INT^1^59547,73869^0
%EDCPOST ;;10:50 AM  14 Feb 1992; 09 Feb 90  7:36 PM ; 26 Jun 93  9:25 AM
 
 
 
 
 
DEB 
 N HT
 I %9T<34 D @%9T
 Q
 
 
1 U %PORT W "/Courier-francais findfont 12 scalefont setfont",! Q
2 U %PORT W "/Times-Roman-francais findfont 10 scalefont setfont",! Q
3 U %PORT W "/Times-Italic-francais findfont 10 scalefont setfont",! Q
4 U %PORT W "/Times-Bold-francais findfont 10 scalefont setfont",! Q
5 U %PORT W "/Times-Roman-francais findfont 8 scalefont setfont",! Q
6 U %PORT W "/Courier-francais findfont 10 scalefont setfont",! Q
7 U %PORT W "/Courier-francais findfont 7.2 scalefont setfont",! Q
8 U %PORT W "/Courier-francais findfont 11 scalefont setfont",! Q
9 U %PORT W "/Helvetica-francais findfont 12 scalefont setfont",! Q
10 U %PORT W "/Helvetica-Bold-francais findfont 14.4 scalefont setfont",! Q
11 U %PORT W "/Helvetica-Bold-francais findfont 12 scalefont setfont",! Q
12 U %PORT W "/Helvetica-Bold-francais findfont 10 scalefont setfont",! Q
13 U %PORT W "/Helvetica-francais findfont 8 scalefont setfont",! Q
14 U %PORT W "/Helvetica-francais findfont 6 scalefont setfont",! Q
15 U %PORT W "/Helvetica-Oblique-francais findfont 9 scalefont setfont",! Q
16 U %PORT W "/Helvetica-francais findfont 7 scalefont setfont",! Q
17 U %PORT W "/Times-Roman-francais findfont 12 scalefont setfont",! Q
18 U %PORT W "/Courier-Oblique-francais findfont 12 scalefont setfont",! Q
19 U %PORT W "/Courier-Oblique-francais findfont 10 scalefont setfont",! Q
20 U %PORT W "/Courier-BoldOblique-francais findfont 10 scalefont setfont",! Q
21 U %PORT W "/Times-BoldItalic-francais findfont 8 scalefont setfont",! Q
22 U %PORT W "/Helvetica-Oblique-francais findfont 6 scalefont setfont",! Q
23 U %PORT W "/Helvetica-BoldOblique-francais findfont 10 scalefont setfont",! Q
24 U %PORT W "/Courier-Oblique-francais findfont 10 scalefont setfont",! Q
25 U %PORT W "/Courier-Oblique-francais findfont 8 scalefont setfont",! Q
26 U %PORT W "/Courier-BoldOblique-francais findfont 8 scalefont setfont",! Q
27 U %PORT W "/Helvetica-BoldOblique-francais findfont 12 scalefont setfont",! Q
28 U %PORT W "/Helvetica-Oblique-francais findfont 12 scalefont setfont",! Q
29 U %PORT W "/Courier-Bold-francais findfont 16 scalefont setfont",! Q
30 U %PORT W "/Courier-Bold-francais findfont 12 scalefont setfont",! Q
31 U %PORT W "/Courier-Bold-francais findfont 8 scalefont setfont",! Q
32 U %PORT W "/Times-Bold-francais findfont 12 scalefont setfont",! Q
33 U %PORT W "/Times-Roman-francais findfont 6 scalefont setfont",! Q
 
TEXT 
 N %FONC
 D XY^%PBP4TXT
 
 
 I %9O="HORIZONTALE" G H
V 
 
 I ^V($J,"%","%ORIENTATION",1)="VERTICALE" G:VALPLA="D" PLACERD G PLACER
 
 S %FONC="LANDSCAPE" D ^%PBPZ
 S %9O=$$^%QZCHW("HORIZONTALE")
 D:VALPLA="D" PLACERD D:VALPLA'="D" PLACER
 S %FONC="PORTRAIT" D ^%PBPZ
 S %9O=$$^%QZCHW("VERTICALE")
 S %FONC="CHARGER.VARIABLES" D ^%PBPZ
 Q
H 
 
 I ^V($J,"%","%ORIENTATION",1)="HORIZONTALE" G:VALPLA="D" PLACERD G PLACER
 
 S %FONC="PORTRAIT" D ^%PBPZ
 S %9O=$$^%QZCHW("VERTICALE")
 D:VALPLA="D" PLACERD D:VALPLA'="D" PLACER
 S %FONC="LANDSCAPE" D ^%PBPZ
 S %9O=$$^%QZCHW("HORIZONTALE")
 S %FONC="CHARGER.VARIABLES" D ^%PBPZ
 Q
FTEXT 
 
 D ACCENT(.%9STR) U %PORT W "("_%9STR_") show",! Q
 
PLACER 
 S %FONC="MOUV" D ^%PBPZ
 D DEB,ACCENT(.%9STR)
 U %PORT W "("_%9STR_") show",!
 Q
PLACERD 
 D DEB,ACCENT(.%9STR)
 S %FONC="PLACERD" D ^%PBPZ
 Q
ACCENT(CH) 
 ;; substitutions pour postscript
 N SSCH,CAR,I
 S SSCH=""
 
 S CAR=$E(CH,1) I CAR="%" S CH=" "_CH
 F I=1:1 S CAR=$E(CH,I) Q:CAR=""  S SSCH=SSCH_$S(CAR="\":"\215",CAR="(":"\(",CAR=")":"\)",CAR="@":"\210",CAR="{":"\216",CAR="}":"\217",1:CAR)
 S CH=SSCH
 Q
 
 
INITSESS 
 N ILIG,LIG
 
 F ILIG=1:1 S LIG=$P($T(TXTACC+ILIG),";;",2,999) Q:LIG=""  U %PORT W LIG,!
 
 F ILIG=1:1 S LIG=$P($T(JUSTIF+ILIG),";;",2,999) Q:LIG=""  U %PORT W LIG,!
 
 F ILIG=1:1 S LIG=$P($T(FRANPOL+ILIG),";;",2,999) Q:LIG=""  U %PORT W LIG,!
 Q
 
TXTACC ;;
 ;;%!
 ;;/dictlocal 12 dict def
 ;;/Reencode
 ;;{dictlocal begin
 ;;/Nouveauvect exch def /Nomnouvellepolice exch def /Nompolicedebase exch def
 ;;/Policedebasedict Nompolicedebase findfont def
 ;;/nouveaudict Policedebasedict maxlength dict def
 ;;Policedebasedict
 ;;{exch dup /FID ne
 ;;{dup /Encoding eq {exch dup length array copy nouveaudict 3 1 roll put} {exch nouveaudict 3 1 roll put} ifelse}
 ;;{pop pop}
 ;;ifelse} forall
 ;;nouveaudict /FontName Nomnouvellepolice put
 ;;Nouveauvect aload pop
 ;;Nouveauvect length 2 idiv
 ;;{nouveaudict /Encoding get 3 1 roll put} repeat
 ;;Nomnouvellepolice nouveaudict definefont pop
 ;;end
 ;;} def
 ;;/francvect [141/ccedilla 142/eacute 143/egrave 136/agrave] def
 ;;
FRANPOL ;;
 ;;/Courier /Courier-francais francvect Reencode
 ;;/Courier-Bold /Courier-Bold-francais francvect Reencode
 ;;/Courier-Oblique /Courier-Oblique-francais francvect Reencode
 ;;/Courier-BoldOblique /Courier-BoldOblique-francais francvect Reencode
 ;;/Helvetica /Helvetica-francais francvect Reencode
 ;;/Helvetica-Oblique /Helvetica-Oblique-francais francvect Reencode
 ;;/Helvetica-BoldOblique /Helvetica-BoldOblique-francais francvect Reencode
 ;;/Helvetica-Bold /Helvetica-Bold-francais francvect Reencode
 ;;/Times-Italic /Times-Italic-francais francvect Reencode
 ;;/Times-Bold /Times-Bold-francais francvect Reencode
 ;;/Times-BoldItalic /Times-BoldItalic-francais francvect Reencode
 ;;/Times-Roman /Times-Roman-francais francvect Reencode
 ;;
JUSTIF ;;
 ;;/JustifDroite
 ;;{/xx exch def /yy exch def /ch exch def
 ;;ch stringwidth pop
 ;;xx exch sub yy moveto
 ;;ch show} def
 ;;

