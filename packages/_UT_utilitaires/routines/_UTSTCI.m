;!----------------------------------------------------------------------------!
;!                                                                            !
;! Licence et conditions d'utilisation                                        !
;! Yexpert : (your) Systeme Expert sous Mumps GT.M et GNU/Linux               !
;! Copyright (C) 2001-2015 by Hamid LOUAKED (HL).                             !
;!                                                                            !
;! Hamid LOUAKED                                                              !
;! 10, impasse Faraday                                                        !
;! 78520 LIMAY                                                                !
;! France                                                                     !
;!                                                                            !
;! yexpert@yrelay.fr                                                          !
;! http://www.yrelay.fr/                                                      !
;!                                                                            !
;! Ce programme est un logiciel libre ; vous pouvez le redistribuer           !
;! et/ou le modifier conformement aux dispositions de la Licence Publique     !
;! Generale GNU, telle que publiee par la Free Software Foundation ;          !
;! version 3 de la licence, ou encore (a votre choix) toute version ulterieure.
;!                                                                            !
;! Ce programme est distribue dans l'espoir qu'il sera utile,                 !
;! mais SANS AUCUNE GARANTIE ; sans meme la garantie implicite de             !
;! COMMERCIALISATION ou D'ADAPTATION A UN OBJET PARTICULIER.                  !
;! Pour plus de details, voir la Licence Publique Generale GNU.               !
;!                                                                            !
;! Un exemplaire de la Licence Publique Generale GNU doit etre fourni avec    !
;! ce programme ; si ce n'est pas le cas,                                     !
;! ecrivez a la Free Software Foundation Inc.,                                !
;! 675 Mass Ave, Cambridge, MA 02139, Etats-Unis.                             !
;!                                                                            !
;! Ce logiciel est telechargeable a l'adresse http://www.yrelay.fr/ ;         !
;! vous trouverez egalement, sur ce site, un mode d'emploi complet            !
;! et des informations supplementaires.                                       !
;!                                                                            !
;!----------------------------------------------------------------------------!
;!                                                                            !
;! GNU General Public License : http://www.gnu.org/copyleft/gpl.html          !
;!                                                                            !
;! Traduction francaise : http://dachary.org/loic/gpl-french.pdf              !
;!                                                                            !
;!----------------------------------------------------------------------------!

;!============================================================================!
;! Nomprog     :                                                              !
;! Module      :                                                              !
;! But         :                                                              !
;!                                                                            !
;! Description :                                                              !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!                                                                            !
;!----------------------------------------------------------------------------!
;! Modif ! Auteur ! Date     ! Commentaires                                   !
;!-------!--------!----------!------------------------------------------------!
;!       ! HL     ! 22/03/01 ! Creation                                       !
;! HL001 ! HL     ! 00/00/00 ! Description succincte de la modification.      !
;! HL002 ! HL     ! 00/00/00 !                                                !
;!-------!--------!----------!------------------------------------------------!
;!============================================================================!

;%UTSTCI^INT^1^59547,74033^0
%UTSTCI ;PS;09:10 PM  18 Jan 1996; 17 Sep 92 10:50 AM ; 08 Feb 93 12:04 PM
 
 
 
 
 
MOZPRF ;;CAR/WW/X/AN/TLBA/MAJ/UT/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/t/u/v/w/x/y/z/TST/
 
 
MOZPRFE ;;MAJOR/
 ;;
 
MOZEXT ;;A/B/C/D/E/F/G/
 ;;SRTRAME/TOTAL/ABCHG/SINUS/EXPONENT/PC1/
 ;;JALUC1/PLJFLUX/
 ;;MIS/MIS1/MIS2/MIS3/MIS4/MIS5/
 ;;TO4ARTHE/TO5ARTHE/
 ;;TOP0MODA/TOP0MOVP/TOP0PEDRE/TOP0QUER/TOP0TESG/TOP0XLBD/TOP0XPEX/TOP01ARY/TOP0DRIM/TOP0EDC1/TOP0GFIL/TOP0GGAM/TOP0HAUX
 ;;TOP0KCLZ/TOP0PACL/TOP0gfil/TOP0pacl/
 ;;TOP8GGAM/TOP8TLR/TOP8V/
 ;;
 
 
 
SYSPRF ;;%TLTE/%TLG/%SY1/%SY2/%SY3/%SY4/%SC/%UT/UT/%QUBKU/%QUBKD/
 ;;%GX/%SGRQ/%Gfkuy/
 
 
SYSPRFE ;;%SCO/%UTSTC/%TLGEST/
 
 
SYSEXT ;;%ANNMOD/%ASMDONN/%ANAFFEC/%AN7S/%AN7S1/%AN11/%AN34/%AN50/
 ;;%BQSCRE/%BQSCRE1/
 ;;%DLMACH4/
 ;;%EDCAABS/%EDCACS/%EDCAACT/%EDCAASN/%EDCACT/%EDCAACS/%EDCAATG/%EDCACOS/%EDCACOT/%EDCACTG/%EDCAEXP/%EDCALN/%EDCALOG/%EDCAPUI/%EDCASIN/%EDCASQ/%EDCASQR/%EDCATG/%EDCARIT/%EDCABAS/
 ;;%EDCADRE/%EDCTEXT/%EDCTXT2/%EDCHP3/%EDCLIG/
 ;;%EDDSUPP/%EDDUPPL/%EDDTRT/%EDDPOUR/%EDDPOUV/%EDDMODL/%EDDUFAC/
 ;;%EDEDIT/
 ;;%EDFACSE/%EDFDIA1/%EDFDUPL/%EDFMDF1/%EDFMODI/%EDFSUPP/%EDFAFFE/%EDFEDIT/%EDFORMA/%EDFTEXT/%EDFTRAI/%%EDFCADR/%EDFTAIL/
 ;;%EDGETM1/%EDGEVEN/%EDGI/%EDGO/
 ;;%EDHLP3/%EDHISTA/
 ;;%EDIT/%EDINSTA/       
 ;;%EDMTEXT/%EDMDESE/%EDMDESS/%EDMODIN/
 ;;%EDREANA/
 ;;%EDTRAIT/
 ;;%EDUCONT/
 ;;%ET/%ETLOD/
 ;;%GA1/%GC1/%GCHANGE/%GCOPY/%GCOPY1/%GCMP/%GCMP1/%GI/%GO/%GRESERV/%GSET/%GDISP/%GIGEN/%GOGEN/%GED/%GED1/
 ;;%INCUPA1/
 ;;%MCODERO/%MCODERI/%MENU/
 ;;%MZLOAD/%MZRECUP/%MZSTORE/%MZGAMRQ/%MZIN2/%MZMAJQS/%MZMAJQS/%MZPECRJ/
 ;;%MZRNG/%MZINSTA/%MZMENUR/
 ;;%OD/
 ;;%PSALGO/%PSALGO2/%PSALGO3/%PSALGO5/%PSALGO6/%PSALGOT/%PSALGT2/%PSALGT3/%PSALGT4/%PSDKB1/
 ;;%QCAPOP1/
 ;;%QMCPSF3/
 ;;%QMKACOS/%QMKACOT/%QMKACTG/%QMKALOG/%QMKALOQ/%QMKAPUI/%QMKARCS/%QMKARTG/%QMKARST/%QMKASIN/%QMKASQR/
 ;;%QSARBRE/%QSARBR1/%QSARBR2/%QSCALVB/%QSLISTE/%QIALI1/%QSCOPOB/%QSMAJL/%QS02/%QSKREQ/%QSMLEX/
 ;;%QSGEN/
 ;;%QSMODI2/%QSMODI3/%QSMODIF/%QSMODL/%QSMODM/%QSMODRE/%QSMODOB/
 ;;%QSLIMEN/%QMNFMEN/%QSLIEN/%QSMENU0/%QSMENU1/%QSVALOR/%QSVARAC/
 ;;%QSMN1/%QSMN2/
 ;;%QSTRUC1/%QSTRUC2/%QSTRUC3/%QSTRUC4/%QSTRUC5/%QSTRUC6/%QSTRUC7/
 ;;%QS0LIS/%QS0G2B/%QS0G2C/
 ;;%QS31/
 ;;%QSGEST8/%QSGE8/
 ;;%QSREPA1/
 ;;%QUBK1/%QUBK2/%QUBK3/
 ;;%QUCHOYB/
 ;;%QUHELP/%QUHELP2/
 ;;%QULOBJ/
 ;;%QUtempo/%QULELM/%QULELM2/%QULELU1/%QULELU2/%QULELUX/%QULELUY/
 ;;%QULELO/%QULELN0/QULELN1/%QULELN2/%QULELN3/%QULELNS/%QULELNU/
 ;;%QULCHP1/%QULCHP2/%QULCHPX/
 ;;%QWACTIV/
 ;;%QZCHAR/%QZCHEVI/
 ;;%RO/%RD/%RFIND/%RFAND/%RDISP/%RCHANGE/%RCMP/%RCMPMUL/%RCMPSEQ/%RCOPY/%RDELETE/%RFIND1/%RFIRST/%RI/%RNEWED/%ROU/%ROUBUILD/%RSET/
 ;;%SCOCONT/
 ;;%SDACAC2/
 ;;%TLMOZAR/%TLUC/%TLTRILI/%TLCRTRI/%TLARGTR/%TLNIVEL/%TLIACTL/
 ;;%TLBAAC4/%TLBAAC5/%TLQUER4/%TLQUER5/%TLQUEU2/
 ;;%TLCAABS/%TLCACS/%TLCAACT/%TLCAASN/%TLCACT/%TLCAATG/%TLCACOS/%TLCACTG/%TLCAEXP/%TLCALN/%TLCALOG/%TLCAPUI/%TLCASIN%TLCASQ/%TLCASQR/%TLCATG/
 ;;%TLCSQRO/%TLCCCOS/%TLCCSIN/%TLCCTGT/%TLCSINU/%TLCEXPO/%TLCABAS/%TLCPUIS/
 ;;%TLOANAL/%TLOCMPBIS/%TLOCMPTER/
 ;;%TLHELP/%TLHELP2/%TLHELP3/%TLHELP4/%TLHELP5/%TLHELP6/
 ;;%TLSAISY/
 ;;%TLIACo/%TLIACp/%TLIAC7/
 ;;%SRAXTIV/
 ;;%SYSPKO/%SYSPKI/
 ;;%SYSAGM/%SYSAGOQ/%SYSABT/%SYSAGI1/%SYSAGQ/%SYSAGU/%SYSAGY/%SYSAGY2/%SYSAMOV/%SYSANAV/%SYSATAP/%SYSAU2/%SYSAVAL/%SYSAGO1/
 ;;%SYSBROM/%SYSBSF1/%SYSBTGO/
 ;;%SYSEERR/%SYSEGRI/%SYSEMAP/
 ;;%SYSGLO/
 ;;%SYSROG/
 ;;%SYSSS/%SYSXFRE/
 ;;%TXP2R/%TXPSUT3/
 ;;%sgpkin/%sgpkout/%zjob1/%zjob2/%zjob3/%xessai/
 
 
SUPSYS N TEMP,I,J,PRF,LV,CH,ROUSUP,ROUNOSUP,ROU
 S TEMP=$$TEMP^%QZCHAD($P($ZPOS,"^",2),"SY")
 S TEMP="^["""_$P($ZPOS,"^",2)SPACE_"""]"_$E(TEMP,2,$L(TEMP)) K @(TEMP)
 S ROUSUP=$$CONCAS^%QZCHAD(TEMP,"R")
 S ROUNOSUP=$$CONCAS^%QZCHAD(TEMP,"N")
 D CLEPAG^%VVIDEO
 F I=0:1 S LV=$T(SYSPRF+I),CH=$P(LV,";;",2) Q:CH=""  F J=1:1 S PRF=$P(CH,"/",J) Q:PRF=""  W !,"selection des "_PRF D SELECT^%SYSROUT("SYS",PRF,ROUSUP)
 F I=0:1 S LV=$T(SYSEXT+I),CH=$P(LV,";;",2) Q:CH=""  F J=1:1 S ROU=$P(CH,"/",J) Q:ROU=""  I $$EXIROU^%SYSROUT($$PCONF^%INCASTS("PSYS"),ROU) W !,"ajout de "_ROU S @ROUSUP@(ROU)=""
 F I=0:1 S LV=$T(SYSPRFE+I),CH=$P(LV,";;",2) Q:CH=""  F J=1:1 S PRF=$P(CH,"/",J) Q:PRF=""  W !,"exclusion des "_PRF D SELECT^%SYSROUT($$PCONF^%INCASTS("PSYS"),PRF,ROUNOSUP)
 S ROU="" F I=0:0 S ROU=$O(@ROUNOSUP@(ROU)) Q:ROU=""  K @ROUSUP@(ROU)
 D CLEPAG^%VVIDEO
 S ROU="" F I=0:1 S ROU=$O(@ROUSUP@(ROU)) Q:ROU=""  S DX=10,DY=10 X XY W ROU_$J("",10)
 S DX=5,DY=18 X XY W I_" routines a supprimer "
 
 I $$CONFIRM^%VZEOUI("ok") D SUPROU^%SYSROUT($$PCONF^%INCASTS("PSYS"),ROUSUP)
 K @(TEMP)
 Q
 
 
SUPMOZ N TEMP,I,J,PRF,LV,CH,ROUSUP,ROUNOSUP,ROU
 S TEMP=$$TEMP^%QZCHAD($P($ZPOS,"^",2),"MZ")
 S TEMP="^["""_$P($ZPOS,"^",2)SPACE_"""]"_$E(TEMP,2,$L(TEMP)) K @(TEMP)
 S ROUSUP=$$CONCAS^%QZCHAD(TEMP,"R")
 S ROUNOSUP=$$CONCAS^%QZCHAD(TEMP,"N")
 D CLEPAG^%VVIDEO
 F I=0:1 S LV=$T(MOZPRF+I),CH=$P(LV,";;",2) Q:CH=""  F J=1:1 S PRF=$P(CH,"/",J) Q:PRF=""  W !,"selection des "_PRF D SELECT^%SYSROUT("MOZ",PRF,ROUSUP)
 F I=0:1 S LV=$T(MOZEXT+I),CH=$P(LV,";;",2) Q:CH=""  F J=1:1 S ROU=$P(CH,"/",J) Q:ROU=""  I $$EXIROU^%SYSROUT($$PCONF^%INCASTS("PROG"),ROU) W !,"ajout de "_ROU S @ROUSUP@(ROU)=""
 F I=0:1 S LV=$T(MOZPRFE+I),CH=$P(LV,";;",2) Q:CH=""  F J=1:1 S PRF=$P(CH,"/",J) Q:PRF=""  W !,"exclusion des "_PRF D SELECT^%SYSROUT($$PCONF^%INCASTS("PROG"),PRF,ROUNOSUP)
 S ROU="" F I=0:0 S ROU=$O(@ROUNOSUP@(ROU)) Q:ROU=""  K @ROUSUP@(ROU)
 D CLEPAG^%VVIDEO
 S ROU="" F I=0:1 S ROU=$O(@ROUSUP@(ROU)) Q:ROU=""  S DX=10,DY=10 X XY W ROU_$J("",10)
 S DX=5,DY=18 X XY W I_" routines a supprimer "
 I $$CONFIRM^%VZEOUI("ok") D SUPROU^%SYSROUT($$PCONF^%INCASTS("PROG"),ROUSUP)
 K @(TEMP)
 Q

